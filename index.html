<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Variables Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <h1 data-version="welcome_message">Default Welcome Message</h1>
    <p>Contact us at: <span data-version="contact_email">Default Email</span></p>

    <script>
        // Function to load the .version file and parse variables
        async function loadVersionFile(url) {
            const response = await fetch(url);
            const text = await response.text();
            const variables = {};

            // Regex to parse variables from the .version file
            const regex = /(\w+)\("([^"]+)"\)\s*=\s*"([^"]+)"/g;
            let match;
            while ((match = regex.exec(text)) !== null) {
                variables[match[1]] = match[2];
            }

            return variables;
        }

        // Function to apply variables to the webpage
        function applyVariables(variables) {
            for (const [key, value] of Object.entries(variables)) {
                const elements = document.querySelectorAll(`[data-version="${key}"]`);
                elements.forEach(element => {
                    element.textContent = value;
                });
            }
        }

        // Load and apply variables on page load
        document.addEventListener('DOMContentLoaded', async () => {
            const variables = await loadVersionFile('archdeposits.github.io/verison/app/veri/testpage.verison');
            applyVariables(variables);
        });
    </script>
</body>
</html>
